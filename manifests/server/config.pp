# Class: stns_v2::server::config
# ===========================
#
# stns_v2::server::config is to configure stns.

class stns_v2::server::config (
  $port     = $stns_v2::server::port,
  $user     = $stns_v2::server::user,
  $password = $stns_v2::server::password,
  $tokens   = $stns_v2::server::tokens,
){

  concat { '/etc/stns/server/stns.conf':
    ensure => present,
    owner  => 'root',
    group  => 'root',
    mode   => '0644',
    notify => Class['stns_v2::server::service'],
  }

  concat::fragment {
    'header':
      target  => '/etc/stns/server/stns.conf',
      content => "# HEADER: Autogenerated by Puppet.\n\n",
      order   => '01';

    'server_config':
      target  => '/etc/stns/server/stns.conf',
      content => template('stns/server/stns.conf.erb'),
      order   => '20';

    'users_config':
      target  => '/etc/stns/server/stns.conf',
      content => "## Users configurations.\n",
      order   => '40';

    'groups_config':
      target  => '/etc/stns/server/stns.conf',
      content => "## Groups configurations.\n",
      order   => '60';
  }

}
